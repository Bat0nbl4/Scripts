# Проект "Реестр книг"

<p>
    Проект "Реестр книг" на фреймворке Laravel. Версия лавы 10. Это вообще мой первый сайт на php. Можно сказать что я одновременно изучал и php и Laravel. Тогда я думал что у меня хорошо получилось, а сейчас посмотрел код, аж стыдно его кидать)
</p>

<p>Задачи для проекта (то что помню):</p>
<ul>
    <li>
        Пользователь должен иметь возможность авторизации и регистрации. Причём есть 3 типа пользователей. Первый: обычный пользователь. Второй: издатель. Третий: администратор. У издателя есть возможность публиковать книги.
    </li>
    <li>
        Администратор имеет возможность редактировать/удалять книги, и акаунты пользователей. (Тут я почему то сделал для администратора одельную авторизацию. Хотя можно было сделать авторизацию админа, при авторизации пользователя. Всё равно работа с одними и теми же данными. Т.е. нет одтельной таблицы с админами или что то такое. Не помню уже зачем.)
    </li>
    <li>
        Во время публикации книги должна быть возможность указать: название, автора, жанр, тип издания (Печатное, Графическое, Электронное) и описание. А так же возможность установить обложку этой книги. (картинка)
    </li>
</ul>

<p>Там конечно было болше пунктов и описаны они были подробнее, но это то что я помню.</p>

<p>Сейчас чисто по интерестным моментам:</p>
<p>
    Контролерры я делал для каждой модели. По две штуки. Первый файл для предоставления в web. Второй чисто api взаимодействие. Поясню на примере UserController и UserActionController. В первом все функции возвращяют исключительно страницы. К ним могут быть прекрепленны какие-то данные. Например функция index:

```php
public function index($id) {
    $user = User::findOrFail($id);
    if ($user->user_type == UserTypeEnum::Publisher->value) {
        $books = SortController::PersonalBookSort($user->login);
    } else {
        $books = null;
    }
    return view('views/web/users/user', ['user' => $user, 'books' => $books]);
}
```

    Она возвращяет профиль пользователя с определённым id. Если пользователь является издателем, то также в его профиле будут отображатсья опубликованные им книги.
</p>

```php
    public function index($id) {
        $user = User::findOrFail($id);
        if ($user->user_type == UserTypeEnum::Publisher->value) {
            $books = SortController::PersonalBookSort($user->login);
        } else {
            $books = null;
        }
        return view('views/web/users/user', ['user' => $user, 'books' => $books]);
    }
```
